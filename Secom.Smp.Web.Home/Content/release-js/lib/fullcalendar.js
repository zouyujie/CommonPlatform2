/*!
 * FullCalendar v2.4.0
 * Docs & License: http://fullcalendar.io/
 * (c) 2015 Adam Shaw
 */

(function(e){typeof define=="function"&&define.amd?define(["jquery","moment"],e):typeof exports=="object"?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)})(function(e,t){function s(e){return K(e,i)}function o(t){var n={views:t.views||{}},r;return e.each(t,function(t,s){t!="views"&&(e.isPlainObject(s)&&!/(time|duration|interval)$/i.test(t)&&e.inArray(t,i)==-1?(r=null,e.each(s,function(e,i){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(e)?(n.views[e]||(n.views[e]={}),n.views[e][t]=i):(r||(r={}),r[e]=i)}),r&&(n[t]=r)):n[t]=s)}),n}function u(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function a(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function f(){e("body").addClass("fc-not-allowed")}function l(){e("body").removeClass("fc-not-allowed")}function c(t,n,r){var i=Math.floor(n/t.length),s=Math.floor(n-i*(t.length-1)),o=[],u=[],a=[],f=0;h(t),t.each(function(n,r){var l=n===t.length-1?s:i,c=e(r).outerHeight(!0);c<l?(o.push(r),u.push(c),a.push(e(r).height())):f+=c}),r&&(n-=f,i=Math.floor(n/o.length),s=Math.floor(n-i*(o.length-1))),e(o).each(function(t,n){var r=t===o.length-1?s:i,f=u[t],l=a[t],c=r-(f-l);f<r&&e(n).height(c)})}function h(e){e.height("")}function p(t){var n=0;return t.find("> *").each(function(t,r){var i=e(r).outerWidth();i>n&&(n=i)}),n++,t.width(n),n}function d(e,t){return e.height(t).addClass("fc-scroller"),e[0].scrollHeight-1>e[0].clientHeight?!0:(v(e),!1)}function v(e){e.height("").removeClass("fc-scroller")}function m(t){var n=t.css("position"),r=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!r.length?e(t[0].ownerDocument||document):r}function g(e){var t=e.offset();return{left:t.left,right:t.left+e.outerWidth(),top:t.top,bottom:t.top+e.outerHeight()}}function y(e){var t=e.offset(),n=w(e),r=t.left+T(e,"border-left-width")+n.left,i=t.top+T(e,"border-top-width")+n.top;return{left:r,right:r+e[0].clientWidth,top:i,bottom:i+e[0].clientHeight}}function b(e){var t=e.offset(),n=t.left+T(e,"border-left-width")+T(e,"padding-left"),r=t.top+T(e,"border-top-width")+T(e,"padding-top");return{left:n,right:n+e.width(),top:r,bottom:r+e.height()}}function w(e){var t=e.innerWidth()-e[0].clientWidth,n={left:0,right:0,top:0,bottom:e.innerHeight()-e[0].clientHeight};return S()&&e.css("direction")=="rtl"?n.left=t:n.right=t,n}function S(){return E===null&&(E=x()),E}function x(){var t=e("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),n=t.children(),r=n.offset().left>t.offset().left;return t.remove(),r}function T(e,t){return parseFloat(e.css(t))||0}function N(e){return e.which==1&&!e.ctrlKey}function C(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function k(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function L(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function A(e,t){return{left:e.left-t.left,top:e.top-t.top}}function O(t){var n=[],r=[],i,s;typeof t=="string"?r=t.split(/\s*,\s*/):typeof t=="function"?r=[t]:e.isArray(t)&&(r=t);for(i=0;i<r.length;i++)s=r[i],typeof s=="string"?n.push(s.charAt(0)=="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&n.push({func:s});return n}function M(e,t,n){var r,i;for(r=0;r<n.length;r++){i=_(e,t,n[r]);if(i)return i}return 0}function _(e,t,n){return n.func?n.func(e,t):D(e[n.field],t[n.field])*(n.order||1)}function D(t,n){return!t&&!n?0:n==null?-1:t==null?1:e.type(t)==="string"||e.type(n)==="string"?String(t).localeCompare(String(n)):t-n}function P(e,t){var n=e.start,r=e.end,i=t.start,s=t.end,o,u,a,f;if(r>i&&n<s)return n>=i?(o=n.clone(),a=!0):(o=i.clone(),a=!1),r<=s?(u=r.clone(),f=!0):(u=s.clone(),f=!1),{start:o,end:u,isStart:a,isEnd:f}}function j(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function F(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days")})}function I(e,n,r){return t.duration(Math.round(e.diff(n,r,!0)),r)}function q(e,t){var n,r,i;for(n=0;n<B.length;n++){r=B[n],i=R(r,e,t);if(i>=1&&at(i))break}return r}function R(e,n,r){return r!=null?r.diff(n,e,!0):t.isDuration(n)?n.as(e):n.end.diff(n.start,e,!0)}function U(e,t,n){var r;return X(n)?(t-e)/n:(r=n.asMonths(),Math.abs(r)>=1&&at(r)?t.diff(e,"months",!0)/r:t.diff(e,"days",!0)/n.asDays())}function z(e,t){var n,r;return X(e)||X(t)?e/t:(n=e.asMonths(),r=t.asMonths(),Math.abs(n)>=1&&at(n)&&Math.abs(r)>=1&&at(r)?n/r:e.asDays()/t.asDays())}function W(e,n){var r;return X(e)?t.duration(e*n):(r=e.asMonths(),Math.abs(r)>=1&&at(r)?t.duration({months:r*n}):t.duration({days:e.asDays()*n}))}function X(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function V(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function $(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}function K(e,t){var n={},r,i,s,o,u,a;if(t)for(r=0;r<t.length;r++){i=t[r],s=[];for(o=e.length-1;o>=0;o--){u=e[o][i];if(typeof u=="object")s.unshift(u);else if(u!==undefined){n[i]=u;break}}s.length&&(n[i]=K(s))}for(r=e.length-1;r>=0;r--){a=e[r];for(i in a)i in n||(n[i]=a[i])}return n}function Q(e){var t=function(){};return t.prototype=e,new t}function G(e,t){for(var n in e)Z(e,n)&&(t[n]=e[n])}function Y(e,t){var n=["constructor","toString","valueOf"],r,i;for(r=0;r<n.length;r++)i=n[r],e[i]!==Object.prototype[i]&&(t[i]=e[i])}function Z(e,t){return J.call(e,t)}function et(t){return/undefined|null|boolean|number|string/.test(e.type(t))}function tt(t,n,r){e.isFunction(t)&&(t=[t]);if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function nt(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e]}function rt(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function it(e){return e.replace(/&.*?;/g,"")}function st(t){var n=[];return e.each(t,function(e,t){t!=null&&n.push(e+":"+t)}),n.join(";")}function ot(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ut(e,t){return e-t}function at(e){return e%1===0}function ft(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}function lt(e,t){var n,r,i,s,o=function(){var u=+(new Date)-s;u<t&&u>0?n=setTimeout(o,t-u):(n=null,e.apply(i,r),n||(i=r=null))};return function(){i=this,r=arguments,s=+(new Date),n||(n=setTimeout(o,t))}}function yt(n,r,i){var s=n[0],o=n.length==1&&typeof s=="string",u,a,f,l;if(t.isMoment(s))l=t.apply(null,n),wt(s,l);else if(V(s)||s===undefined)l=t.apply(null,n);else{u=!1,a=!1;if(o){if(ct.test(s))s+="-01",n=[s],u=!0,a=!0;else if(f=ht.exec(s))u=!f[5],a=!0}else e.isArray(s)&&(a=!0);r||u?l=t.utc.apply(t,n):l=t.apply(null,n),u?(l._ambigTime=!0,l._ambigZone=!0):i&&(a?l._ambigZone=!0:o&&(l.utcOffset?l.utcOffset(s):l.zone(s)))}return l._fullCalendar=!0,l}function bt(e,r){var i=!1,s=!1,o=e.length,u=[],a,f;for(a=0;a<o;a++)f=e[a],t.isMoment(f)||(f=n.moment.parseZone(f)),i=i||f._ambigTime,s=s||f._ambigZone,u.push(f);for(a=0;a<o;a++)f=u[a],!r&&i&&!f._ambigTime?u[a]=f.clone().stripTime():s&&!f._ambigZone&&(u[a]=f.clone().stripZone());return u}function wt(e,t){e._ambigTime?t._ambigTime=!0:t._ambigTime&&(t._ambigTime=!1),e._ambigZone?t._ambigZone=!0:t._ambigZone&&(t._ambigZone=!1)}function Et(e,t){e.year(t[0]||0).month(t[1]||0).date(t[2]||0).hours(t[3]||0).minutes(t[4]||0).seconds(t[5]||0).milliseconds(t[6]||0)}function St(e,t){return dt.format.call(e,t)}function xt(e,t){return Tt(e,_t(t))}function Tt(e,t){var n="",r;for(r=0;r<t.length;r++)n+=Ct(e,t[r]);return n}function Ct(e,t){var n,r;if(typeof t=="string")return t;if(n=t.token)return Nt[n]?Nt[n](e):St(e,n);if(t.maybe){r=Tt(e,t.maybe);if(r.match(/[1-9]/))return r}return""}function kt(e,t,r,i,s){var o;return e=n.moment.parseZone(e),t=n.moment.parseZone(t),o=(e.localeData||e.lang).call(e),r=o.longDateFormat(r)||r,i=i||" - ",Lt(e,t,_t(r),i,s)}function Lt(e,t,n,r,i){var s,o,u="",a,f="",l,c="",h="",p="";for(o=0;o<n.length;o++){s=Ot(e,t,n[o]);if(s===!1)break;u+=s}for(a=n.length-1;a>o;a--){s=Ot(e,t,n[a]);if(s===!1)break;f=s+f}for(l=o;l<=a;l++)c+=Ct(e,n[l]),h+=Ct(t,n[l]);if(c||h)i?p=h+r+c:p=c+r+h;return u+p+f}function Ot(e,t,n){var r,i;if(typeof n=="string")return n;if(r=n.token){i=At[r.charAt(0)];if(i&&e.isSame(t,i))return St(e,r)}return!1}function _t(e){return e in Mt?Mt[e]:Mt[e]=Dt(e)}function Dt(e){var t=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g,r;while(r=n.exec(e))r[1]?t.push(r[1]):r[2]?t.push({maybe:Dt(r[2])}):r[3]?t.push({token:r[3]}):r[5]&&t.push(r[5]);return t}function Pt(){}function Rt(e,t){return!e&&!t?!0:e&&t?e.grid===t.grid&&e.row===t.row&&e.col===t.col:!1}function Xt(e){var t=$t(e);return t==="background"||t==="inverse-background"}function Vt(e){return $t(e)==="inverse-background"}function $t(e){return nt((e.source||{}).rendering,e.rendering)}function Jt(e){var t={},n,r;for(n=0;n<e.length;n++)r=e[n],(t[r._id]||(t[r._id]=[])).push(r);return t}function Kt(e,t){return e.eventStartMS-t.eventStartMS}function Qt(r){var i=n.dataAttrPrefix,s,o,u,a;return i&&(i+="-"),s=r.data(i+"event")||null,s&&(typeof s=="object"?s=e.extend({},s):s={},o=s.start,o==null&&(o=s.time),u=s.duration,a=s.stick,delete s.start,delete s.time,delete s.duration,delete s.stick),o==null&&(o=r.data(i+"start")),o==null&&(o=r.data(i+"time")),u==null&&(u=r.data(i+"duration")),a==null&&(a=r.data(i+"stick")),o=o!=null?t.duration(o):null,u=u!=null?t.duration(u):null,a=Boolean(a),{eventProps:s,startTime:o,duration:u,stick:a}}function Yt(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];if(r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0}return!1}function Zt(e,t){return e.leftCol-t.leftCol}function tn(e){var t=[],n,r,i;for(n=0;n<e.length;n++){r=e[n];for(i=0;i<t.length;i++)if(!sn(r,t[i]).length)break;r.level=i,(t[i]||(t[i]=[])).push(r)}return t}function nn(e){var t,n,r,i,s;for(t=0;t<e.length;t++){n=e[t];for(r=0;r<n.length;r++){i=n[r],i.forwardSegs=[];for(s=t+1;s<e.length;s++)sn(i,e[s],i.forwardSegs)}}}function rn(e){var t=e.forwardSegs,n=0,r,i;if(e.forwardPressure===undefined){for(r=0;r<t.length;r++)i=t[r],rn(i),n=Math.max(n,1+i.forwardPressure);e.forwardPressure=n}}function sn(e,t,n){n=n||[];for(var r=0;r<t.length;r++)on(e,t[r])&&n.push(t[r]);return n}function on(e,t){return e.bottom>t.top&&e.top<t.bottom}function fn(r,i){function x(){d?C()&&(A(),k()):T()}function T(){v=o.theme?"ui":"fc",r.addClass("fc"),o.isRTL?r.addClass("fc-rtl"):r.addClass("fc-ltr"),o.theme?r.addClass("ui-widget"):r.addClass("fc-unthemed"),d=e("<div class='fc-view-container'/>").prependTo(r),h=s.header=new mn(s,o),p=h.render(),p&&r.prepend(p),k(o.defaultView),o.handleWindowResize&&(b=lt(M,o.windowResizeDelay),e(window).resize(b))}function N(){m&&m.removeElement(),h.removeElement(),d.remove(),r.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),b&&e(window).unbind("resize",b)}function C(){return r.is(":visible")}function k(t){w++,m&&t&&m.type!==t&&(h.deactivateButton(m.type),Z(),m.removeElement(),m=s.view=null),!m&&t&&(m=s.view=g[t]||(g[t]=s.instantiateView(t)),m.setElement(e("<div class='fc-view fc-"+t+"-view' />").appendTo(d)),h.activateButton(t)),m&&(E=m.massageCurrentDate(E),(!m.displaying||!E.isWithin(m.intervalStart,m.intervalEnd))&&C()&&(Z(),m.display(E),et(),I(),q(),H())),et(),w--}function L(e){if(C())return e&&O(),w++,m.updateSize(!0),w--,!0}function A(){C()&&O()}function O(){typeof o.contentHeight=="number"?y=o.contentHeight:typeof o.height=="number"?y=o.height-(p?p.outerHeight(!0):0):y=Math.round(d.width()/Math.max(o.aspectRatio,.5))}function M(e){!w&&e.target===window&&m.start&&L(!0)&&m.trigger("windowResize",c)}function _(){P(),B()}function D(){C()&&(Z(),m.displayEvents(S),et())}function P(){Z(),m.clearEvents(),et()}function H(){!o.lazyFetching||f(m.start,m.end)?B():D()}function B(){l(m.start,m.end)}function j(e){S=e,D()}function F(){D()}function I(){h.updateTitle(m.title)}function q(){var e=s.getNow();e.isWithin(m.intervalStart,m.intervalEnd)?h.disableButton("today"):h.enableButton("today")}function R(e,t){m.select(s.buildSelectRange.apply(s,arguments))}function U(){m&&m.unselect()}function z(){E=m.computePrevDate(E),k()}function W(){E=m.computeNextDate(E),k()}function X(){E.add(-1,"years"),k()}function V(){E.add(1,"years"),k()}function $(){E=s.getNow(),k()}function J(e){E=s.moment(e),k()}function K(e){E.add(t.duration(e)),k()}function G(e,t){var n;t=t||"day",n=s.getViewSpec(t)||s.getUnitViewSpec(t),E=e,k(n?n.type:null)}function Y(){return E.clone()}function Z(){d.css({width:"100%",height:d.height(),overflow:"hidden"})}function et(){d.css({width:"",height:"",overflow:""})}function tt(){return s}function nt(){return m}function rt(e,t){if(t===undefined)return o[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio")o[e]=t,L(!0)}function it(e,t){var n=Array.prototype.slice.call(arguments,2);t=t||c,this.triggerWith(e,t,n);if(o[e])return o[e].apply(t,n)}var s=this;s.initOptions(i||{});var o=this.options;s.render=x,s.destroy=N,s.refetchEvents=_,s.reportEvents=j,s.reportEventChange=F,s.rerenderEvents=D,s.changeView=k,s.select=R,s.unselect=U,s.prev=z,s.next=W,s.prevYear=X,s.nextYear=V,s.today=$,s.gotoDate=J,s.incrementDate=K,s.zoomTo=G,s.getDate=Y,s.getCalendar=tt,s.getView=nt,s.option=rt,s.trigger=it;var u=Q(vn(o.lang));o.monthNames&&(u._months=o.monthNames),o.monthNamesShort&&(u._monthsShort=o.monthNamesShort),o.dayNames&&(u._weekdays=o.dayNames),o.dayNamesShort&&(u._weekdaysShort=o.dayNamesShort);if(o.firstDay!=null){var a=Q(u._week);a.dow=o.firstDay,u._week=a}u._fullCalendar_weekCalc=function(e){if(typeof e=="function")return e;if(e==="local")return e;if(e==="iso"||e==="ISO")return"ISO"}(o.weekNumberCalculation),s.defaultAllDayEventDuration=t.duration(o.defaultAllDayEventDuration),s.defaultTimedEventDuration=t.duration(o.defaultTimedEventDuration),s.moment=function(){var e;return o.timezone==="local"?(e=n.moment.apply(null,arguments),e.hasTime()&&e.local()):o.timezone==="UTC"?e=n.moment.utc.apply(null,arguments):e=n.moment.parseZone.apply(null,arguments),"_locale"in e?e._locale=u:e._lang=u,e},s.getIsAmbigTimezone=function(){return o.timezone!=="local"&&o.timezone!=="UTC"},s.rezoneDate=function(e){return s.moment(e.toArray())},s.getNow=function(){var e=o.now;return typeof e=="function"&&(e=e()),s.moment(e)},s.getEventEnd=function(e){return e.end?e.end.clone():s.getDefaultEventEnd(e.allDay,e.start)},s.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(s.defaultAllDayEventDuration):n.add(s.defaultTimedEventDuration),s.getIsAmbigTimezone()&&n.stripZone(),n},s.humanizeDuration=function(e){return(e.locale||e.lang).call(e,o.lang).humanize()},bn.call(s,o);var f=s.isFetchNeeded,l=s.fetchEvents,c=r[0],h,p,d,v,m,g={},y,b,w=0,E,S=[];o.defaultDate!=null?E=s.moment(o.defaultDate):E=s.getNow(),s.getSuggestedViewHeight=function(){return y===undefined&&A(),y},s.isHeightAuto=function(){return o.contentHeight==="auto"||o.height==="auto"},s.initialize()}function dn(t){e.each(pn,function(e,n){t[e]==null&&(t[e]=n(t))})}function vn(e){var n=t.localeData||t.langData;return n.call(t,e)||n.call(t,"en")}function mn(t,n){function u(){var t=n.header;o=n.theme?"ui":"fc";if(t)return i=e("<div class='fc-toolbar'/>").append(f("left")).append(f("right")).append(f("center")).append('<div class="fc-clear"/>'),i}function a(){i.remove(),i=e()}function f(r){var i=e('<div class="fc-'+r+'"/>'),u=n.header[r];return u&&e.each(u.split(" "),function(r){var u=e(),a=!0,f;e.each(this.split(","),function(r,i){var f,l,c,h,p,d,v,m,g,y;i=="title"?(u=u.add(e("<h2>&nbsp;</h2>")),a=!1):((f=(t.options.customButtons||{})[i])?(c=function(e){f.click&&f.click.call(y[0],e)},h="",p=f.text):(l=t.getViewSpec(i))?(c=function(){t.changeView(i)},s.push(i),h=l.buttonTextOverride,p=l.buttonTextDefault):t[i]&&(c=function(){t[i]()},h=(t.overrides.buttonText||{})[i],p=n.buttonText[i]),c&&(d=f?f.themeIcon:n.themeButtonIcons[i],v=f?f.icon:n.buttonIcons[i],h?m=rt(h):d&&n.theme?m="<span class='ui-icon ui-icon-"+d+"'></span>":v&&!n.theme?m="<span class='fc-icon fc-icon-"+v+"'></span>":m=rt(p),g=["fc-"+i+"-button",o+"-button",o+"-state-default"],y=e('<button type="button" class="'+g.join(" ")+'">'+m+"</button>").click(function(e){y.hasClass(o+"-state-disabled")||(c(e),(y.hasClass(o+"-state-active")||y.hasClass(o+"-state-disabled"))&&y.removeClass(o+"-state-hover"))}).mousedown(function(){y.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){y.removeClass(o+"-state-down")}).hover(function(){y.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){y.removeClass(o+"-state-hover").removeClass(o+"-state-down")}),u=u.add(y)))}),a&&u.first().addClass(o+"-corner-left").end().last().addClass(o+"-corner-right").end(),u.length>1?(f=e("<div/>"),a&&f.addClass("fc-button-group"),f.append(u),i.append(f)):i.append(u)}),i}function l(e){i.find("h2").text(e)}function c(e){i.find(".fc-"+e+"-button").addClass(o+"-state-active")}function h(e){i.find(".fc-"+e+"-button").removeClass(o+"-state-active")}function p(e){i.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(o+"-state-disabled")}function d(e){i.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(o+"-state-disabled")}function v(){return s}var r=this;r.render=u,r.removeElement=a,r.updateTitle=l,r.activateButton=c,r.deactivateButton=h,r.disableButton=p,r.enableButton=d,r.getViewsWithButtons=v;var i=e(),s=[],o}function bn(r){function p(e,t){return!a||e.clone().stripZone()<a.clone().stripZone()||t.clone().stripZone()>f.clone().stripZone()}function d(e,t){a=e,f=t,h=[];var n=++l,r=u.length;c=r;for(var i=0;i<r;i++)v(u[i],n)}function v(t,n){m(t,function(r){var i=e.isArray(t.events),o,u,a;if(n==l){if(r)for(o=0;o<r.length;o++)u=r[o],i?a=u:a=L(u,t),a&&h.push.apply(h,D(a));c--,c||s(h)}})}function m(t,s){var o,u=n.sourceFetchers,l;for(o=0;o<u.length;o++){l=u[o].call(i,t,a.clone(),f.clone(),r.timezone,s);if(l===!0)return;if(typeof l=="object"){m(l,s);return}}var c=t.events;if(c)e.isFunction(c)?(i.pushLoading(),c.call(i,a.clone(),f.clone(),r.timezone,function(e){s(e),i.popLoading()})):e.isArray(c)?s(c):s();else{var h=t.url;if(h){var p=t.success,d=t.error,v=t.complete,g;e.isFunction(t.data)?g=t.data():g=t.data;var y=e.extend({},g||{}),b=nt(t.startParam,r.startParam),w=nt(t.endParam,r.endParam),E=nt(t.timezoneParam,r.timezoneParam);b&&(y[b]=a.format()),w&&(y[w]=f.format()),r.timezone&&r.timezone!="local"&&(y[E]=r.timezone),i.pushLoading(),e.ajax(e.extend({},gn,t,{data:y,success:function(t){t=t||[];var n=tt(p,this,arguments);e.isArray(n)&&(t=n),s(t)},error:function(){tt(d,this,arguments),s()},complete:function(){tt(v,this,arguments),i.popLoading()}}))}else s()}}function g(e){var t=y(e);t&&(u.push(t),c++,v(t,l))}function y(t){var r=n.sourceNormalizers,s,o;e.isFunction(t)||e.isArray(t)?s={events:t}:typeof t=="string"?s={url:t}:typeof t=="object"&&(s=e.extend({},t));if(s){s.className?typeof s.className=="string"&&(s.className=s.className.split(/\s+/)):s.className=[],e.isArray(s.events)&&(s.origArray=s.events,s.events=e.map(s.events,function(e){return L(e,s)}));for(o=0;o<r.length;o++)r[o].call(i,s);return s}}function b(t){u=e.grep(u,function(e){return!w(e,t)}),h=e.grep(h,function(e){return!w(e.source,t)}),s(h)}function w(e,t){return e&&t&&E(e)==E(t)}function E(e){return(typeof e=="object"?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function S(e){e.start=i.moment(e.start),e.end?e.end=i.moment(e.end):e.end=null,P(e,x(e)),s(h)}function x(t){var n={};return e.each(t,function(e,t){T(e)&&t!==undefined&&et(t)&&(n[e]=t)}),n}function T(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function N(e,t){var n=L(e),r,i,u;if(n){r=D(n);for(i=0;i<r.length;i++)u=r[i],u.source||(t&&(o.events.push(u),u.source=o),h.push(u));return s(h),r}return[]}function C(t){var n,r;t==null?t=function(){return!0}:e.isFunction(t)||(n=t+"",t=function(e){return e._id==n}),h=e.grep(h,t,!0);for(r=0;r<u.length;r++)e.isArray(u[r].events)&&(u[r].events=e.grep(u[r].events,t,!0));s(h)}function k(t){return e.isFunction(t)?e.grep(h,t):t!=null?(t+="",e.grep(h,function(e){return e._id==t})):h}function L(n,s){var o={},u,a,f;r.eventDataTransform&&(n=r.eventDataTransform(n)),s&&s.eventDataTransform&&(n=s.eventDataTransform(n)),e.extend(o,n),s&&(o.source=s),o._id=n._id||(n.id===undefined?"_fc"+yn++:n.id+""),n.className?typeof n.className=="string"?o.className=n.className.split(/\s+/):o.className=n.className:o.className=[],u=n.start||n.date,a=n.end,$(u)&&(u=t.duration(u)),$(a)&&(a=t.duration(a));if(n.dow||t.isDuration(u)||t.isDuration(a))o.start=u?t.duration(u):null,o.end=a?t.duration(a):null,o._recurring=!0;else{if(u){u=i.moment(u);if(!u.isValid())return!1}a&&(a=i.moment(a),a.isValid()||(a=null)),f=n.allDay,f===undefined&&(f=nt(s?s.allDayDefault:undefined,r.allDayDefault)),A(u,a,f,o)}return o}function A(e,t,n,r){r.start=e,r.end=t,r.allDay=n,O(r),wn(r)}function O(e){M(e),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(r.forceEventDuration?e.end=i.getDefaultEventEnd(e.allDay,e.start):e.end=null)}function M(e){e.allDay==null&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(e.start.hasTime()||(e.start=i.rezoneDate(e.start)),e.end&&!e.end.hasTime()&&(e.end=i.rezoneDate(e.end)))}function _(t){var n;return t.end||(n=t.allDay,n==null&&(n=!t.start.hasTime()),t=e.extend({},t),t.end=i.getDefaultEventEnd(n,t.start)),t}function D(t,n,r){var i=[],s,o,u,l,c,h,p,d,v;n=n||a,r=r||f;if(t)if(t._recurring){if(o=t.dow){s={};for(u=0;u<o.length;u++)s[o[u]]=!0}l=n.clone().stripTime();while(l.isBefore(r)){if(!s||s[l.day()])c=t.start,h=t.end,p=l.clone(),d=null,c&&(p=p.time(c)),h&&(d=l.clone().time(h)),v=e.extend({},t),A(p,d,!c&&!h,v),i.push(v);l.add(1,"days")}}else i.push(t);return i}function P(t,n,r){function h(e,t){return r?I(e,t,r):n.allDay?F(e,t):j(e,t)}var s={},o,u,a,f,l,c;return n=n||{},n.start||(n.start=t.start.clone()),n.end===undefined&&(n.end=t.end?t.end.clone():null),n.allDay==null&&(n.allDay=t.allDay),O(n),o={start:t._start.clone(),end:t._end?t._end.clone():i.getDefaultEventEnd(t._allDay,t._start),allDay:n.allDay},O(o),u=t._end!==null&&n.end===null,a=h(n.start,o.start),n.end?(f=h(n.end,o.end),l=f.subtract(a)):l=null,e.each(n,function(e,t){T(e)&&t!==undefined&&(s[e]=t)}),c=H(k(t._id),u,n.allDay,a,l,s),{dateDelta:a,durationDelta:l,undo:c}}function H(t,n,r,s,o,u){var a=i.getIsAmbigTimezone(),f=[];return s&&!s.valueOf()&&(s=null),o&&!o.valueOf()&&(o=null),e.each(t,function(t,l){var c,h;c={start:l.start.clone(),end:l.end?l.end.clone():null,allDay:l.allDay},e.each(u,function(e){c[e]=l[e]}),h={start:l._start,end:l._end,allDay:r},O(h),n?h.end=null:o&&!h.end&&(h.end=i.getDefaultEventEnd(h.allDay,h.start)),s&&(h.start.add(s),h.end&&h.end.add(s)),o&&h.end.add(o),a&&!h.allDay&&(s||o)&&(h.start.stripZone(),h.end&&h.end.stripZone()),e.extend(l,u,h),wn(l),f.push(function(){e.extend(l,c),wn(l)})}),function(){for(var e=0;e<f.length;e++)f[e]()}}function B(t){var n=r.businessHours,s={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},o=i.getView(),u;return n&&(u=e.extend({},s,typeof n=="object"?n:{})),u?(t&&(u.start=null,u.end=null),D(L(u),o.start,o.end)):[]}function q(e,t){var n=t.source||{},i=nt(t.constraint,n.constraint,r.eventConstraint),s=nt(t.overlap,n.overlap,r.eventOverlap);return e=_(e),z(e,i,s,t)}function R(e){return z(e,r.selectConstraint,r.selectOverlap)}function U(t,n){var r,i;return n&&(r=e.extend({},n,t),i=D(L(r))[0]),i?q(t,i):(t=_(t),R(t))}function z(t,n,r,s){var o,u,a,f,l,c;t=e.extend({},t),t.start=t.start.clone().stripZone(),t.end=t.end.clone().stripZone();if(n!=null){o=W(n),u=!1;for(f=0;f<o.length;f++)if(X(o[f],t)){u=!0;break}if(!u)return!1}a=i.getPeerEvents(s,t);for(f=0;f<a.length;f++){l=a[f];if(V(l,t)){if(r===!1)return!1;if(typeof r=="function"&&!r(l,s))return!1;if(s){c=nt(l.overlap,(l.source||{}).overlap);if(c===!1)return!1;if(typeof c=="function"&&!c(s,l))return!1}}}return!0}function W(e){return e==="businessHours"?B():typeof e=="object"?D(L(e)):k(e)}function X(e,t){var n=e.start.clone().stripZone(),r=i.getEventEnd(e).stripZone();return t.start>=n&&t.end<=r}function V(e,t){var n=e.start.clone().stripZone(),r=i.getEventEnd(e).stripZone();return t.start<r&&t.end>n}var i=this;i.isFetchNeeded=p,i.fetchEvents=d,i.addEventSource=g,i.removeEventSource=b,i.updateEvent=S,i.renderEvent=N,i.removeEvents=C,i.clientEvents=k,i.mutateEvent=P,i.normalizeEventRange=O,i.normalizeEventRangeTimes=M,i.ensureVisibleEventRange=_;var s=i.reportEvents,o={events:[]},u=[o],a,f,l=0,c=0,h=[];e.each((r.events?[r.events]:[]).concat(r.eventSources||[]),function(e,t){var n=y(t);n&&u.push(n)}),i.getBusinessHoursEvents=B,i.isEventRangeAllowed=q,i.isSelectionRangeAllowed=R,i.isExternalDropRangeAllowed=U,i.getEventCache=function(){return h}}function wn(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}var n=e.fullCalendar={version:"2.4.0"},r=n.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(i,s){var o=e(s),u=o.data("fullCalendar"),a;typeof t=="string"?u&&e.isFunction(u[t])&&(a=u[t].apply(u,n),i||(r=a),t==="destroy"&&o.removeData("fullCalendar")):u||(u=new an(o,t),o.data("fullCalendar",u),u.render())}),r};var i=["header","buttonText","buttonIcons","themeButtonIcons"];n.intersectionToSeg=P,n.applyAll=tt,n.debounce=lt,n.isInt=at,n.htmlEscape=rt,n.cssToStr=st,n.proxy=ft,n.capitaliseFirstLetter=ot,n.getClientRect=y,n.getContentRect=b,n.getScrollbarWidths=w;var E=null;n.intersectRects=C,n.parseFieldSpecs=O,n.compareByFieldSpecs=M,n.compareByFieldSpec=_,n.flexibleCompare=D,n.computeIntervalUnit=q,n.divideRangeByDuration=U,n.divideDurationByDuration=z,n.multiplyDuration=W,n.durationHasTime=X;var H=["sun","mon","tue","wed","thu","fri","sat"],B=["year","month","week","day","hour","minute","second","millisecond"];n.log=function(){var e=window.console;if(e&&e.log)return e.log.apply(e,arguments)},n.warn=function(){var e=window.console;return e&&e.warn?e.warn.apply(e,arguments):n.log.apply(n,arguments)};var J={}.hasOwnProperty,ct=/^\s*\d{4}-\d\d$/,ht=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,pt=t.fn,dt=e.extend({},pt),vt,mt,gt;n.moment=function(){return yt(arguments)},n.moment.utc=function(){var e=yt(arguments,!0);return e.hasTime()&&e.utc(),e},n.moment.parseZone=function(){return yt(arguments,!0,!0)},pt.clone=function(){var e=dt.clone.apply(this,arguments);return wt(this,e),this._fullCalendar&&(e._fullCalendar=!0),e},pt.week=pt.weeks=function(e){var t=(this._locale||this._lang)._fullCalendar_weekCalc;return e==null&&typeof t=="function"?t(this):t==="ISO"?dt.isoWeek.apply(this,arguments):dt.week.apply(this,arguments)},pt.time=function(e){if(!this._fullCalendar)return dt.time.apply(this,arguments);if(e==null)return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,!t.isDuration(e)&&!t.isMoment(e)&&(e=t.duration(e));var n=0;return t.isDuration(e)&&(n=Math.floor(e.asDays())*24),this.hours(n+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},pt.stripTime=function(){var e;return this._ambigTime||(e=this.toArray(),this.utc(),mt(this,e.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},pt.hasTime=function(){return!this._ambigTime},pt.stripZone=function(){var e,t;return this._ambigZone||(e=this.toArray(),t=this._ambigTime,this.utc(),mt(this,e),this._ambigTime=t||!1,this._ambigZone=!0),this},pt.hasZone=function(){return!this._ambigZone},pt.local=function(){var e=this.toArray(),t=this._ambigZone;return dt.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,t&&gt(this,e),this},pt.utc=function(){return dt.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},e.each(["zone","utcOffset"],function(e,t){dt[t]&&(pt[t]=function(e){return e!=null&&(this._ambigTime=!1,this._ambigZone=!1),dt[t].apply(this,arguments)})}),pt.format=function(){return this._fullCalendar&&arguments[0]?xt(this,arguments[0]):this._ambigTime?St(this,"YYYY-MM-DD"):this._ambigZone?St(this,"YYYY-MM-DD[T]HH:mm:ss"):dt.format.apply(this,arguments)},pt.toISOString=function(){return this._ambigTime?St(this,"YYYY-MM-DD"):this._ambigZone?St(this,"YYYY-MM-DD[T]HH:mm:ss"):dt.toISOString.apply(this,arguments)},pt.isWithin=function(e,t){var n=bt([this,e,t]);return n[0]>=n[1]&&n[0]<n[2]},pt.isSame=function(e,t){var r;return this._fullCalendar?t?(r=bt([this,e],!0),dt.isSame.call(r[0],r[1],t)):(e=n.moment.parseZone(e),dt.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone)):dt.isSame.apply(this,arguments)},e.each(["isBefore","isAfter"],function(e,t){pt[t]=function(e,n){var r;return this._fullCalendar?(r=bt([this,e]),dt[t].call(r[0],r[1],n)):dt[t].apply(this,arguments)}}),vt="_d"in t()&&"updateOffset"in t,mt=vt?function(e,n){e._d.setTime(Date.UTC.apply(Date,n)),t.updateOffset(e,!1)}:Et,gt=vt?function(e,n){e._d.setTime(+(new Date(n[0]||0,n[1]||0,n[2]||0,n[3]||0,n[4]||0,n[5]||0,n[6]||0))),t.updateOffset(e,!1)}:Et;var Nt={t:function(e){return St(e,"a").charAt(0)},T:function(e){return St(e,"A").charAt(0)}};n.formatRange=kt;var At={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},Mt={};n.Class=Pt,Pt.extend=function(e){var t=this,n;return e=e||{},Z(e,"constructor")&&(n=e.constructor),typeof n!="function"&&(n=e.constructor=function(){t.apply(this,arguments)}),n.prototype=Q(t.prototype),G(e,n.prototype),Y(e,n.prototype),G(t,n),n},Pt.mixin=function(e){G(e.prototype||e,this.prototype)};var Ht=n.Emitter=Pt.extend({callbackHash:null,on:function(e,t){return this.getCallbacks(e).add(t),this},off:function(e,t){return this.getCallbacks(e).remove(t),this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);return this.triggerWith(e,this,t),this},triggerWith:function(e,t,n){var r=this.getCallbacks(e);return r.fireWith(t,n),this},getCallbacks:function(t){var n;return this.callbackHash||(this.callbackHash={}),n=this.callbackHash[t],n||(n=this.callbackHash[t]=e.Callbacks()),n}}),Bt=Pt.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,n=this.options;this.el=e('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),n.autoHide&&e(document).on("mousedown",this.documentMousedownProxy=ft(this,"documentMousedown"))},documentMousedown:function(t){this.el&&!e(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),e(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t=this.options,n=this.el.offsetParent().offset(),r=this.el.outerWidth(),i=this.el.outerHeight(),s=e(window),o=m(this.el),u,a,f,l,c;l=t.top||0,t.left!==undefined?c=t.left:t.right!==undefined?c=t.right-r:c=0,o.is(window)||o.is(document)?(o=s,u=0,a=0):(f=o.offset(),u=f.top,a=f.left),u+=s.scrollTop(),a+=s.scrollLeft(),t.viewportConstrain!==!1&&(l=Math.min(l,u+o.outerHeight()-i-this.margin),l=Math.max(l,u+this.margin),c=Math.min(c,a+o.outerWidth()-r-this.margin),c=Math.max(c,a+this.margin)),this.el.css({top:l-n.top,left:c-n.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),jt=Pt.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(e){this.grid=e},build:function(){this.grid.build(),this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.grid.clear(),this.rowCoords=null,this.colCoords=null},getCell:function(t,n){var r=this.rowCoords,i=r.length,s=this.colCoords,o=s.length,u=null,a=null,f,l,c;if(this.inBounds(t,n)){for(f=0;f<i;f++){l=r[f];if(n>=l.top&&n<l.bottom){u=f;break}}for(f=0;f<o;f++){l=s[f];if(t>=l.left&&t<l.right){a=f;break}}if(u!==null&&a!==null)return c=this.grid.getCell(u,a),c.grid=this.grid,e.extend(c,r[u],s[a]),c}return null},computeBounds:function(){this.bounds=this.containerEl?y(this.containerEl):null},inBounds:function(e,t){var n=this.bounds;return n?e>=n.left&&e<n.right&&t>=n.top&&t<n.bottom:!0}}),Ft=Pt.extend({coordMaps:null,constructor:function(e){this.coordMaps=e},build:function(){var e=this.coordMaps,t;for(t=0;t<e.length;t++)e[t].build()},getCell:function(e,t){var n=this.coordMaps,r=null,i;for(i=0;i<n.length&&!r;i++)r=n[i].getCell(e,t);return r},clear:function(){var e=this.coordMaps,t;for(t=0;t<e.length;t++)e[t].clear()}}),It=n.DragListener=Pt.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(e){e=e||{},this.options=e,this.subjectEl=e.subjectEl},mousedown:function(e){N(e)&&(e.preventDefault(),this.startListening(e),this.options.distance||this.startDrag(e))},startListening:function(t){var n;this.isListening||(t&&this.options.scroll&&(n=m(e(t.target)),!n.is(window)&&!n.is(document)&&(this.scrollEl=n,this.scrollHandlerProxy=lt(ft(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),e(document).on("mousemove",this.mousemoveProxy=ft(this,"mousemove")).on("mouseup",this.mouseupProxy=ft(this,"mouseup")).on("selectstart",this.preventDefault),t?(this.originX=t.pageX,this.originY=t.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(t))},listenStart:function(e){this.trigger("listenStart",e)},mousemove:function(e){var t=e.pageX-this.originX,n=e.pageY-this.originY,r,i;this.isDragging||(r=this.options.distance||1,i=t*t+n*n,i>=r*r&&this.startDrag(e)),this.isDragging&&this.drag(t,n,e)},startDrag:function(e){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(e))},dragStart:function(e){var t=this.subjectEl;this.trigger("dragStart",e),(this.subjectHref=t?t.attr("href"):null)&&t.removeAttr("href")},drag:function(e,t,n){this.trigger("drag",e,t,n),this.updateScroll(n)},mouseup:function(e){this.stopListening(e)},stopDrag:function(e){this.isDragging&&(this.stopScrolling(),this.dragStop(e),this.isDragging=!1)},dragStop:function(e){var t=this;this.trigger("dragStop",e),setTimeout(function(){t.subjectHref&&t.subjectEl.attr("href",t.subjectHref)},0)},stopListening:function(t){this.stopDrag(t),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),e(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(t))},listenStop:function(e){this.trigger("listenStop",e)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e=this.scrollEl;this.scrollBounds=e?g(e):null},updateScroll:function(e){var t=this.scrollSensitivity,n=this.scrollBounds,r,i,s,o,u=0,a=0;n&&(r=(t-(e.pageY-n.top))/t,i=(t-(n.bottom-e.pageY))/t,s=(t-(e.pageX-n.left))/t,o=(t-(n.right-e.pageX))/t,r>=0&&r<=1?u=r*this.scrollSpeed*-1:i>=0&&i<=1&&(u=i*this.scrollSpeed),s>=0&&s<=1?a=s*this.scrollSpeed*-1:o>=0&&o<=1&&(a=o*this.scrollSpeed)),this.setScrollVel(u,a)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),(this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId&&(this.scrollIntervalId=setInterval(ft(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel&&this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),qt=It.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(e,t){It.prototype.constructor.call(this,t),this.coordMap=e},listenStart:function(e){var t=this.subjectEl,n,r,i;It.prototype.listenStart.apply(this,arguments),this.computeCoords(),e?(r={left:e.pageX,top:e.pageY},i=r,t&&(n=g(t),i=k(i,n)),this.origCell=this.getCell(i.left,i.top),t&&this.options.subjectCenter&&(this.origCell&&(n=C(this.origCell,n)||n),i=L(n)),this.coordAdjust=A(i,r)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(e){var t;It.prototype.dragStart.apply(this,arguments),t=this.getCell(e.pageX,e.pageY),t&&this.cellOver(t)},drag:function(e,t,n){var r;It.prototype.drag.apply(this,arguments),r=this.getCell(n.pageX,n.pageY),Rt(r,this.cell)||(this.cell&&this.cellOut(),r&&this.cellOver(r))},dragStop:function(){this.cellDone(),It.prototype.dragStop.apply(this,arguments)},cellOver:function(e){this.cell=e,this.trigger("cellOver",e,Rt(e,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){It.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){It.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(e,t){return this.coordAdjust&&(e+=this.coordAdjust.left,t+=this.coordAdjust.top),this.coordMap.getCell(e,t)}}),Ut=Pt.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,n){this.options=n=n||{},this.sourceEl=t,this.parentEl=n.parentEl?e(n.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.mouseY0=t.pageY,this.mouseX0=t.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),e(document).on("mousemove",this.mousemoveProxy=ft(this,"mousemove")))},stop:function(t,n){function s(){this.isAnimating=!1,r.removeElement(),this.top0=this.left0=null,n&&n()}var r=this,i=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,e(document).off("mousemove",this.mousemoveProxy),t&&i&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:i,complete:s})):s())},getEl:function(){var e=this.el;return e||(this.sourceEl.width(),e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),e},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),this.top0===null&&(this.sourceEl.width(),e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){this.topDelta=e.pageY-this.mouseY0,this.leftDelta=e.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),zt=Pt.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(e){this.view=e,this.isRTL=e.opt("isRTL")},rowHtml:function(e,t){var n=this.getHtmlRenderer("cell",e),r="",i,s;t=t||0;for(i=0;i<this.colCnt;i++)s=this.getCell(t,i),r+=n(s);return r=this.bookendCells(r,e,t),"<tr>"+r+"</tr>"},bookendCells:function(e,t,n){var r=this.getHtmlRenderer("intro",t)(n||0),i=this.getHtmlRenderer("outro",t)(n||0),s=this.isRTL?i:r,o=this.isRTL?r:i;return typeof e=="string"?s+e+o:e.prepend(s).append(o)},getHtmlRenderer:function(e,t){var n=this.view,r,i,s,o;r=e+"Html",t&&(i=t+ot(e)+"Html");if(i&&(o=n[i]))s=n;else if(i&&(o=this[i]))s=this;else if(o=n[r])s=n;else if(o=this[r])s=this;return typeof o=="function"?function(){return o.apply(s,arguments)||""}:function(){return o||""}}}),Wt=n.Grid=zt.extend({start:null,end:null,rowCnt:0,colCnt:0,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){zt.apply(this,arguments),this.coordMap=new jt(this),this.elsByFill={},this.externalDragStartProxy=ft(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(e){this.start=e.start.clone(),this.end=e.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e=this.view,t,n;this.colHeadFormat=e.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=e.opt("eventTimeFormat")||e.opt("timeFormat")||this.computeEventTimeFormat(),t=e.opt("displayEventTime"),t==null&&(t=this.computeDisplayEventTime()),n=e.opt("displayEventEnd"),n==null&&(n=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=n},build:function(){},clear:function(){},rangeToSegs:function(e){},diffDates:function(e,t){return this.largeUnit?I(e,t,this.largeUnit):j(e,t)},getCell:function(t,n){var r;return n==null&&(typeof t=="number"?(n=t%this.colCnt,t=Math.floor(t/this.colCnt)):(n=t.col,t=t.row)),r={row:t,col:n},e.extend(r,this.getRowData(t),this.getColData(n)),e.extend(r,this.computeCellRange(r)),r},computeCellRange:function(e){var t=this.computeCellDate(e);return{start:t,end:t.clone().add(this.cellDuration)}},computeCellDate:function(e){},getRowData:function(e){return{}},getColData:function(e){return{}},getRowEl:function(e){},getColEl:function(e){},getCellDayEl:function(e){return this.getColEl(e.col)||this.getRowEl(e.row)},computeRowCoords:function(){var e=[],t,n,r;for(t=0;t<this.rowCnt;t++)n=this.getRowEl(t),r=n.offset().top,e.push({top:r,bottom:r+n.outerHeight()});return e},computeColCoords:function(){var e=[],t,n,r;for(t=0;t<this.colCnt;t++)n=this.getColEl(t),r=n.offset().left,e.push({left:r,right:r+n.outerWidth()});return e},setElement:function(t){var n=this;this.el=t,t.on("mousedown",function(t){!e(t.target).is(".fc-event-container *, .fc-more")&&!e(t.target).closest(".fc-popover").length&&n.dayMousedown(t)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){e(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){e(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(e){var t=this,n=this.view,r=n.opt("selectable"),i,s,o=new qt(this.coordMap,{scroll:n.opt("dragScroll"),dragStart:function(){n.unselect()},cellOver:function(e,n,o){o&&(i=n?e:null,r&&(s=t.computeSelection(o,e),s?t.renderSelection(s):f()))},cellOut:function(e){i=null,s=null,t.unrenderSelection(),l()},listenStop:function(e){i&&n.triggerDayClick(i,t.getCellDayEl(i),e),s&&n.reportSelection(s,e),l()}});o.mousedown(e)},renderRangeHelper:function(e,t){var n=this.fabricateHelperEvent(e,t);this.renderHelper(n,t)},fabricateHelperEvent:function(e,t){var n=t?Q(t.event):{};return n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventRange(n),n.className=(n.className||[]).concat("fc-helper"),t||(n.editable=!1),n},renderHelper:function(e,t){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(this.selectionRangeToSegs(e))},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var n=[e.start,e.end,t.start,t.end],r;return n.sort(ut),r={start:n[0].clone(),end:n[3].clone()},this.view.calendar.isSelectionRangeAllowed(r)?r:null},selectionRangeToSegs:function(e){return this.rangeToSegs(e)},renderHighlight:function(e){this.renderFill("highlight",e)},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(e,t){},unrenderFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(t,n){var r=this,i=this[t+"SegEl"],s="",o=[],u;if(n.length){for(u=0;u<n.length;u++)s+=this.fillSegHtml(t,n[u]);e(s).each(function(t,s){var u=n[t],a=e(s);i&&(a=i.call(r,u,a)),a&&(a=e(a),a.is(r.fillSegTag)&&(u.el=a,o.push(u)))})}return o},fillSegTag:"div",fillSegHtml:function(e,t){var n=this[e+"SegClasses"],r=this[e+"SegCss"],i=n?n.call(this,t):[],s=st(r?r.call(this,t):{});return"<"+this.fillSegTag+(i.length?' class="'+i.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.rowHtml("head")+"</thead>"+"</table>"+"</div>"},headCellHtml:function(e){var t=this.view,n=e.start;return'<th class="fc-day-header '+t.widgetHeaderClass+" fc-"+H[n.day()]+'">'+rt(n.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(e){var t=this.view,n=e.start,r=this.getDayClasses(n);return r.unshift("fc-day",t.widgetContentClass),'<td class="'+r.join(" ")+'"'+' data-date="'+n.format("YYYY-MM-DD")+'"'+"></td>"},getDayClasses:function(e){var t=this.view,n=t.calendar.getNow().stripTime(),r=["fc-"+H[e.day()]];return t.intervalDuration.as("months")==1&&e.month()!=t.intervalStart.month()&&r.push("fc-other-month"),e.isSame(n,"day")?r.push("fc-today",t.highlightStateClass):e<n?r.push("fc-past"):r.push("fc-future"),r}});Wt.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(e){var t=this.eventsToSegs(e),n=[],r=[],i,s;for(i=0;i<t.length;i++)s=t[i],Xt(s.event)?n.push(s):r.push(s);n=this.renderBgSegs(n)||n,r=this.renderFgSegs(r)||r,this.segs=n.concat(r)},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},unrenderFgSegs:function(){},renderFgSegEls:function(t,n){var r=this.view,i="",s=[],o;if(t.length){for(o=0;o<t.length;o++)i+=this.fgSegHtml(t[o],n);e(i).each(function(n,i){var o=t[n],u=r.resolveEventEl(o.event,e(i));u&&(u.data("fc-seg",o),o.el=u,s.push(o))})}return s},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return["fc-bgevent"].concat(t.className,n.className||[])},bgEventSegCss:function(e){var t=this.view,n=e.event,r=n.source||{};return{"background-color":n.backgroundColor||n.color||r.backgroundColor||r.color||t.opt("eventBackgroundColor")||t.opt("eventColor")}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var t=this,n=this.view;e.each({mouseenter:function(e,n){t.triggerSegMouseover(e,n)},mouseleave:function(e,n){t.triggerSegMouseout(e,n)},click:function(e,t){return n.trigger("eventClick",this,e.event,t)},mousedown:function(r,i){e(i.target).is(".fc-resizer")&&n.isEventResizable(r.event)?t.segResizeMousedown(r,i,e(i.target).is(".fc-start-resizer")):n.isEventDraggable(r.event)&&t.segDragMousedown(r,i)}},function(n,r){t.el.on(n,".fc-event-container > *",function(n){var i=e(this).data("fc-seg");if(i&&!t.isDraggingSeg&&!t.isResizingSeg)return r.call(this,i,n)})})},triggerSegMouseover:function(e,t){this.mousedOverSeg||(this.mousedOverSeg=e,this.view.trigger("eventMouseover",e.el[0],e.event,t))},triggerSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",e.el[0],e.event,t))},segDragMousedown:function(e,t){var n=this,r=this.view,i=r.calendar,s=e.el,o=e.event,u,a=new Ut(e.el,{parentEl:r.el,opacity:r.opt("dragOpacity"),revertDuration:r.opt("dragRevertDuration"),zIndex:2}),c=new qt(r.coordMap,{distance:5,scroll:r.opt("dragScroll"),subjectEl:s,subjectCenter:!0,listenStart:function(e){a.hide(),a.start(e)},dragStart:function(t){n.triggerSegMouseout(e,t),n.segDragStart(e,t),r.hideEvent(o)},cellOver:function(t,s,l){e.cell&&(l=e.cell),u=n.computeEventDrop(l,t,o),u&&!i.isEventRangeAllowed(u,o)&&(f(),u=null),u&&r.renderDrag(u,e)?a.hide():a.show(),s&&(u=null)},cellOut:function(){r.unrenderDrag(),a.show(),u=null},cellDone:function(){l()},dragStop:function(t){a.stop(!u,function(){r.unrenderDrag(),r.showEvent(o),n.segDragStop(e,t),u&&r.reportEventDrop(o,u,this.largeUnit,s,t)})},listenStop:function(){a.stop()}});c.mousedown(t)},segDragStart:function(e,t){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,n){var r=this.view.calendar,i=e.start,s=t.start,o,u;return i.hasTime()===s.hasTime()?(o=this.diffDates(s,i),n.allDay&&X(o)?(u={start:n.start.clone(),end:r.getEventEnd(n),allDay:!1},r.normalizeEventRangeTimes(u)):u={start:n.start.clone(),end:n.end?n.end.clone():null,allDay:n.allDay},u.start.add(o),u.end&&u.end.add(o)):u={start:s.clone(),end:null,allDay:!s.hasTime()},u},applyDragOpacity:function(e){var t=this.view.opt("dragOpacity");t!=null&&e.each(function(e,n){n.style.opacity=t})},externalDragStart:function(t,n){var r=this.view,i,s;if(r.opt("droppable")){i=e((n?n.item:null)||t.target),s=r.opt("dropAccept");if(e.isFunction(s)?s.call(i[0],i):i.is(s))this.isDraggingExternal||this.listenToExternalDrag(i,t,n)}},listenToExternalDrag:function(e,t,n){var r=this,i=Qt(e),s,o;s=new qt(this.coordMap,{listenStart:function(){r.isDraggingExternal=!0},cellOver:function(e){o=r.computeExternalDrop(e,i),o?r.renderDrag(o):f()},cellOut:function(){o=null,r.unrenderDrag(),l()},dragStop:function(){r.unrenderDrag(),l(),o&&r.view.reportExternalDrop(i,o,e,t,n)},listenStop:function(){r.isDraggingExternal=!1}}),s.startDrag(t)},computeExternalDrop:function(e,t){var n={start:e.start.clone(),end:null};return t.startTime&&!n.start.hasTime()&&n.start.time(t.startTime),t.duration&&(n.end=n.start.clone().add(t.duration)),this.view.calendar.isExternalDropRangeAllowed(n,t.eventProps)?n:null},renderDrag:function(e,t){},unrenderDrag:function(){},segResizeMousedown:function(e,t,n){var r=this,i=this.view,s=i.calendar,o=e.el,u=e.event,a=s.getEventEnd(u),c,h;c=new qt(this.coordMap,{distance:5,scroll:i.opt("dragScroll"),subjectEl:o,dragStart:function(t){r.triggerSegMouseout(e,t),r.segResizeStart(e,t)},cellOver:function(t,o,l){h=n?r.computeEventStartResize(l,t,u):r.computeEventEndResize(l,t,u),h&&(s.isEventRangeAllowed(h,u)?h.start.isSame(u.start)&&h.end.isSame(a)&&(h=null):(f(),h=null)),h&&(i.hideEvent(u),r.renderEventResize(h,e))},cellOut:function(){h=null},cellDone:function(){r.unrenderEventResize(),i.showEvent(u),l()},dragStop:function(t){r.segResizeStop(e,t),h&&i.reportEventResize(u,h,this.largeUnit,o,t)}}),c.mousedown(t)},segResizeStart:function(e,t){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,n){return this.computeEventResize("start",e,t,n)},computeEventEndResize:function(e,t,n){return this.computeEventResize("end",e,t,n)},computeEventResize:function(e,t,n,r){var i=this.view.calendar,s=this.diffDates(n[e],t[e]),o,u;return o={start:r.start.clone(),end:i.getEventEnd(r),allDay:r.allDay},o.allDay&&X(s)&&(o.allDay=!1,i.normalizeEventRangeTimes(o)),o[e].add(s),o.start.isBefore(o.end)||(u=r.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration,this.cellDuration&&this.cellDuration<u&&(u=this.cellDuration),e=="start"?o.start=o.end.clone().subtract(u):o.end=o.start.clone().add(u)),o},renderEventResize:function(e,t){},unrenderEventResize:function(){},getEventTimeText:function(e,t,n){return t==null&&(t=this.eventTimeFormat),n==null&&(n=this.displayEventEnd),this.displayEventTime&&e.start.hasTime()?n&&e.end?this.view.formatRange(e,t):e.start.format(t):""},getSegClasses:function(e,t,n){var r=e.event,i=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(r.className,r.source?r.source.className:[]);return t&&i.push("fc-draggable"),n&&i.push("fc-resizable"),i},getEventSkinCss:function(e){var t=this.view,n=e.source||{},r=e.color,i=n.color,s=t.opt("eventColor");return{"background-color":e.backgroundColor||r||n.backgroundColor||i||t.opt("eventBackgroundColor")||s,"border-color":e.borderColor||r||n.borderColor||i||t.opt("eventBorderColor")||s,color:e.textColor||n.textColor||t.opt("eventTextColor")}},eventsToSegs:function(e,t){var n=this.eventsToRanges(e),r=[],i;for(i=0;i<n.length;i++)r.push.apply(r,this.eventRangeToSegs(n[i],t));return r},eventsToRanges:function(t){var n=this,r=Jt(t),i=[];return e.each(r,function(e,t){t.length&&i.push.apply(i,Vt(t[0])?n.eventsToInverseRanges(t):n.eventsToNormalRanges(t))}),i},eventsToNormalRanges:function(e){var t=this.view.calendar,n=[],r,i,s,o;for(r=0;r<e.length;r++)i=e[r],s=i.start.clone().stripZone(),o=t.getEventEnd(i).stripZone(),n.push({event:i,start:s,end:o,eventStartMS:+s,eventDurationMS:o-s});return n},eventsToInverseRanges:function(e){var t=this.view,n=t.start.clone().stripZone(),r=t.end.clone().stripZone(),i=this.eventsToNormalRanges(e),s=[],o=e[0],u=n,a,f;i.sort(Kt);for(a=0;a<i.length;a++)f=i[a],f.start>u&&s.push({event:o,start:u,end:f.start}),u=f.end;return u<r&&s.push({event:o,start:u,end:r}),s},eventRangeToSegs:function(e,t){var n,r,i;e=this.view.calendar.ensureVisibleEventRange(e),t?n=t(e):n=this.rangeToSegs(e);for(r=0;r<n.length;r++)i=n[r],i.event=e.event,i.eventStartMS=e.eventStartMS,i.eventDurationMS=e.eventDurationMS;return n},sortSegs:function(e){e.sort(ft(this,"compareSegs"))},compareSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||M(e.event,t.event,this.view.eventOrderSpecs)}}),n.dataAttrPrefix="";var Gt=Wt.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){Wt.apply(this,arguments),this.cellDuration=t.duration(1,"day")},renderDates:function(e){var t=this.view,n=this.rowCnt,r=this.colCnt,i=n*r,s="",o,u,a;for(o=0;o<n;o++)s+=this.dayRowHtml(o,e);this.el.html(s),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day");for(u=0;u<i;u++)a=this.getCell(u),t.trigger("dayRender",null,a.start,this.dayEls.eq(u))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents(!0),t=this.eventsToSegs(e);this.renderFill("businessHours",t,"bgevent")},dayRowHtml:function(e,t){var n=this.view,r=["fc-row","fc-week",n.widgetContentClass];return t&&r.push("fc-rigid"),'<div class="'+r.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.rowHtml("day",e)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.rowHtml("number",e)+"</thead>":"")+"</table>"+"</div>"+"</div>"},dayCellHtml:function(e){return this.bgCellHtml(e)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},rangeUpdated:function(){var e,t,n,r;this.updateCellDates(),e=this.cellDates;if(this.breakOnWeeks){t=e[0].day();for(r=1;r<e.length;r++)if(e[r].day()==t)break;n=Math.ceil(e.length/r)}else n=1,r=e.length;this.rowCnt=n,this.colCnt=r},updateCellDates:function(){var e=this.view,t=this.start.clone(),n=[],r=-1,i=[];while(t.isBefore(this.end))e.isHiddenDay(t)?i.push(r+.5):(r++,i.push(r),n.push(t.clone())),t.add(1,"days");this.cellDates=n,this.dayToCellOffsets=i},computeCellDate:function(e){var t=this.colCnt,n=e.row*t+(this.isRTL?t-e.col-1:e.col);return this.cellDates[n].clone()},getRowEl:function(e){return this.rowEls.eq(e)},getColEl:function(e){return this.dayEls.eq(e)},getCellDayEl:function(e){return this.dayEls.eq(e.row*this.colCnt+e.col)},computeRowCoords:function(){var e=Wt.prototype.computeRowCoords.call(this);return e[e.length-1].bottom+=this.bottomCoordPadding,e},rangeToSegs:function(e){var t=this.isRTL,n=this.rowCnt,r=this.colCnt,i=[],s,o,u,a,f,l,c,h,p,d;e=this.view.computeDayRange(e),s=this.dateToCellOffset(e.start),o=this.dateToCellOffset(e.end.subtract(1,"days"));for(u=0;u<n;u++)a=u*r,f=a+r-1,h=Math.max(a,s),p=Math.min(f,o),h=Math.ceil(h),p=Math.floor(p),h<=p&&(l=h===s,c=p===o,h-=a,p-=a,d={row:u,isStart:l,isEnd:c},t?(d.leftCol=r-p-1,d.rightCol=r-h-1):(d.leftCol=h,d.rightCol=p),i.push(d));return i},dateToCellOffset:function(e){var t=this.dayToCellOffsets,n=e.diff(this.start,"days");return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},renderDrag:function(e,t){this.renderHighlight(this.eventRangeToSegs(e));if(t&&!t.el.closest(this.el).length)return this.renderRangeHelper(e,t),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(e,t){this.renderHighlight(this.eventRangeToSegs(e)),this.renderRangeHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,n){var r=[],i=this.eventsToSegs([t]),s;i=this.renderFgSegEls(i),s=this.renderSegRows(i),this.rowEls.each(function(t,i){var o=e(i),u=e('<div class="fc-helper-skeleton"><table/></div>'),a;n&&n.row===t?a=n.el.position().top:a=o.find(".fc-content-skeleton tbody").position().top,u.css("top",a).find("table").append(s[t].tbodyEl),o.append(u),r.push(u[0])}),this.helperEls=e(r)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,n,r){var i=[],s,o,u;n=this.renderFillSegEls(t,n);for(s=0;s<n.length;s++)o=n[s],u=this.renderFillRow(t,o,r),this.rowEls.eq(o.row).append(u),i.push(u[0]);return this.elsByFill[t]=e(i),n},renderFillRow:function(t,n,r){var i=this.colCnt,s=n.leftCol,o=n.rightCol+1,u,a;return r=r||t.toLowerCase(),u=e('<div class="fc-'+r+'-skeleton">'+"<table><tr/></table>"+"</div>"),a=u.find("tr"),s>0&&a.append('<td colspan="'+s+'"/>'),a.append(n.el.attr("colspan",o-s)),o<i&&a.append('<td colspan="'+(i-o)+'"/>'),this.bookendCells(a,t),u}});Gt.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Wt.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Wt.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var n=e.grep(t,function(e){return e.event.allDay});return Wt.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(t){var n;return t=this.renderFgSegEls(t),n=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,r){e(r).find(".fc-content-skeleton > table").append(n[t].tbodyEl)}),t},unrenderFgSegs:function(){var e=this.rowStructs||[],t;while(t=e.pop())t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var t=[],n,r;n=this.groupSegRows(e);for(r=0;r<n.length;r++)t.push(this.renderSegRow(r,n[r]));return t},fgSegHtml:function(e,t){var n=this.view,r=e.event,i=n.isEventDraggable(r),s=!t&&r.allDay&&e.isStart&&n.isEventResizableFromStart(r),o=!t&&r.allDay&&e.isEnd&&n.isEventResizableFromEnd(r),u=this.getSegClasses(e,i,s||o),a=st(this.getEventSkinCss(r)),f="",l,c;return u.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&(l=this.getEventTimeText(r),l&&(f='<span class="fc-time">'+rt(l)+"</span>")),c='<span class="fc-title">'+(rt(r.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(r.url?' href="'+rt(r.url)+'"':"")+(a?' style="'+a+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?c+" "+f:f+" "+c)+"</div>"+(s?'<div class="fc-resizer fc-start-resizer" />':"")+(o?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,n){function g(t){while(h<t)m=(f[l-1]||[])[h],m?m.attr("rowspan",parseInt(m.attr("rowspan")||1,10)+1):(m=e("<td/>"),p.append(m)),a[l][h]=m,f[l][h]=m,h++}var r=this.colCnt,i=this.buildSegLevels(n),s=Math.max(1,i.length),o=e("<tbody/>"),u=[],a=[],f=[],l,c,h,p,d,v,m;for(l=0;l<s;l++){c=i[l],h=0,p=e("<tr/>"),u.push([]),a.push([]),f.push([]);if(c)for(d=0;d<c.length;d++){v=c[d],g(v.leftCol),m=e('<td class="fc-event-container"/>').append(v.el),v.leftCol!=v.rightCol?m.attr("colspan",v.rightCol-v.leftCol+1):f[l][h]=m;while(h<=v.rightCol)a[l][h]=m,u[l][h]=v,h++;p.append(m)}g(r),this.bookendCells(p,"eventSkeleton"),o.append(p)}return{row:t,tbodyEl:o,cellMatrix:a,segMatrix:u,segLevels:i,segs:n}},buildSegLevels:function(e){var t=[],n,r,i;this.sortSegs(e);for(n=0;n<e.length;n++){r=e[n];for(i=0;i<t.length;i++)if(!Yt(r,t[i]))break;r.level=i,(t[i]||(t[i]=[])).push(r)}for(i=0;i<t.length;i++)t[i].sort(Zt);return t},groupSegRows:function(e){var t=[],n;for(n=0;n<this.rowCnt;n++)t.push([]);for(n=0;n<e.length;n++)t[e[n].row].push(e[n]);return t}}),Gt.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t=this.rowStructs||[],n,r;for(n=0;n<t.length;n++)this.unlimitRow(n),e?typeof e=="number"?r=e:r=this.computeRowLevelLimit(n):r=!1,r!==!1&&this.limitRow(n,r)},computeRowLevelLimit:function(t){function a(t,n){u=Math.max(u,e(n).outerHeight())}var n=this.rowEls.eq(t),r=n.height(),i=this.rowStructs[t].tbodyEl.children(),s,o,u;for(s=0;s<i.length;s++){o=i.eq(s).removeClass("fc-limited"),u=0,o.find("> td > :first-child").each(a);if(o.position().top+u>r)return s}return!1},limitRow:function(t,n){function x(i){while(o<i)u=r.getCell(t,o),p=r.getCellSegs(u,n),p.length&&(m=f[n-1][o],S=r.renderMoreLink(u,p),E=e("<div/>").append(S),m.append(E),s.push(E[0])),o++}var r=this,i=this.rowStructs[t],s=[],o=0,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;if(n&&n<i.segLevels.length){a=i.segLevels[n-1],f=i.cellMatrix,l=i.tbodyEl.children().slice(n).addClass("fc-limited").get();for(c=0;c<a.length;c++){h=a[c],x(h.leftCol),v=[],d=0;while(o<=h.rightCol)u=this.getCell(t,o),p=this.getCellSegs(u,n),v.push(p),d+=p.length,o++;if(d){m=f[n-1][h.leftCol],g=m.attr("rowspan")||1,y=[];for(b=0;b<v.length;b++)w=e('<td class="fc-more-cell"/>').attr("rowspan",g),p=v[b],u=this.getCell(t,h.leftCol+b),S=this.renderMoreLink(u,[h].concat(p)),E=e("<div/>").append(S),w.append(E),y.push(w[0]),s.push(w[0]);m.addClass("fc-limited").after(e(y)),l.push(m[0])}}x(this.colCnt),i.moreEls=e(s),i.limitedEls=e(l)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(t,n){var r=this,i=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var o=i.opt("eventLimitClick"),u=t.start,a=e(this),f=r.getCellDayEl(t),l=r.getCellSegs(t),c=r.resliceDaySegs(l,u),h=r.resliceDaySegs(n,u);typeof o=="function"&&(o=i.trigger("eventLimitClick",null,{date:u,dayEl:f,moreEl:a,segs:c,hiddenSegs:h},s)),o==="popover"?r.showSegPopover(t,a,c):typeof o=="string"&&i.calendar.zoomTo(u,o)})},showSegPopover:function(e,t,n){var r=this,i=this.view,s=t.parent(),o,u;this.rowCnt==1?o=i.el:o=this.rowEls.eq(e.row),u={className:"fc-more-popover",content:this.renderSegPopoverContent(e,n),parentEl:this.el,top:o.offset().top,autoHide:!0,viewportConstrain:i.opt("popoverViewportConstrain"),hide:function(){r.segPopover.removeElement(),r.segPopover=null,r.popoverSegs=null}},this.isRTL?u.right=s.offset().left+s.outerWidth()+1:u.left=s.offset().left-1,this.segPopover=new Bt(u),this.segPopover.show()},renderSegPopoverContent:function(t,n){var r=this.view,i=r.opt("theme"),s=t.start.format(r.opt("dayPopoverFormat")),o=e('<div class="fc-header '+r.widgetHeaderClass+'">'+'<span class="fc-close '+(i?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+rt(s)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+r.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>"),u=o.find(".fc-event-container"),a;n=this.renderFgSegEls(n,!0),this.popoverSegs=n;for(a=0;a<n.length;a++)n[a].cell=t,u.append(n[a].el);return o},resliceDaySegs:function(t,n){var r=e.map(t,function(e){return e.event}),i=n.clone().stripTime(),s=i.clone().add(1,"days"),o={start:i,end:s};return t=this.eventsToSegs(r,function(e){var t=P(e,o);return t?[t]:[]}),this.sortSegs(t),t},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");return typeof t=="function"?t(e):"+"+e+" "+t},getCellSegs:function(e,t){var n=this.rowStructs[e.row].segMatrix,r=t||0,i=[],s;while(r<n.length)s=n[r][e.col],s&&i.push(s),r++;return i}});var en=Wt.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,colDates:null,labelFormat:null,labelInterval:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){Wt.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(e),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.slatRowHtml()+"</table>"+"</div>"},slotBgCellHtml:function(e){return this.bgCellHtml(e)},slatRowHtml:function(){var e=this.view,n=this.isRTL,r="",i=t.duration(+this.minTime),s,o,u;while(i<this.maxTime)s=this.start.clone().time(i),o=at(z(i,this.labelInterval)),u='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(o?"<span>"+rt(s.format(this.labelFormat))+"</span>":"")+"</td>",r+="<tr "+(o?"":'class="fc-minor"')+">"+(n?"":u)+'<td class="'+e.widgetContentClass+'"/>'+(n?u:"")+"</tr>",i.add(this.slotDuration);return r},processOptions:function(){var n=this.view,r=n.opt("slotDuration"),i=n.opt("snapDuration"),s;r=t.duration(r),i=i?t.duration(i):r,this.slotDuration=r,this.snapDuration=i,this.cellDuration=i,this.minTime=t.duration(n.opt("minTime")),this.maxTime=t.duration(n.opt("maxTime")),s=n.opt("slotLabelFormat"),e.isArray(s)&&(s=s[s.length-1]),this.labelFormat=s||n.opt("axisFormat")||n.opt("smallTimeFormat"),s=n.opt("slotLabelInterval"),this.labelInterval=s?t.duration(s):this.computeLabelInterval(r)},computeLabelInterval:function(e){var n,r,i;for(n=Nn.length-1;n>=0;n--){r=t.duration(Nn[n]),i=z(r,e);if(at(i)&&i>1)return r}return t.duration(e)},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},rangeUpdated:function(){var e=this.view,t=[],n;n=this.start.clone();while(n.isBefore(this.end))t.push(n.clone()),n.add(1,"day"),n=e.skipHiddenDays(n);this.isRTL&&t.reverse(),this.colDates=t,this.colCnt=t.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(e){var t=this.colDates[e.col],n=this.computeSnapTime(e.row);return t=this.view.calendar.rezoneDate(t),t.time(n),t},getColEl:function(e){return this.dayEls.eq(e)},computeSnapTime:function(e){return t.duration(this.minTime+this.snapDuration*e)},rangeToSegs:function(e){var t=this.colCnt,n=[],r,i,s,o;e={start:e.start.clone().stripZone(),end:e.end.clone().stripZone()};for(i=0;i<t;i++)s=this.colDates[i],o={start:s.clone().time(this.minTime),end:s.clone().time(this.maxTime)},r=P(e,o),r&&(r.col=i,n.push(r));return n},updateSize:function(e){this.computeSlatTops(),e&&this.updateSegVerticals()},computeRowCoords:function(){var e=this.el.offset().top,t=[],n,r;for(n=0;n<this.rowCnt;n++)r={top:e+this.computeTimeTop(this.computeSnapTime(n))},n>0&&(t[n-1].bottom=r.top),t.push(r);return r.bottom=r.top+this.computeTimeTop(this.computeSnapTime(n)),t},computeDateTop:function(e,n){return this.computeTimeTop(t.duration(e.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(e){var t=(e-this.minTime)/this.slotDuration,n,r,i,s;return t=Math.max(0,t),t=Math.min(this.slatEls.length,t),n=Math.floor(t),r=t-n,i=this.slatTops[n],r?(s=this.slatTops[n+1],i+(s-i)*r):i},computeSlatTops:function(){var t=[],n;this.slatEls.each(function(r,i){n=e(i).position().top,t.push(n)}),t.push(n+this.slatEls.last().outerHeight()),this.slatTops=t},renderDrag:function(e,t){if(t)return this.renderRangeHelper(e,t),this.applyDragOpacity(this.helperEl),!0;this.renderHighlight(this.eventRangeToSegs(e))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(e,t){this.renderRangeHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(t,n){var r=this.eventsToSegs([t]),i,s,o,u;r=this.renderFgSegEls(r),i=this.renderSegTable(r);for(s=0;s<r.length;s++)o=r[s],n&&n.col===o.col&&(u=n.el,o.el.css({left:u.css("left"),right:u.css("right"),"margin-left":u.css("margin-left"),"margin-right":u.css("margin-right")}));this.helperEl=e('<div class="fc-helper-skeleton"/>').append(i).appendTo(this.el)},unrenderHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(e){this.view.opt("selectHelper")?this.renderRangeHelper(e):this.renderHighlight(this.selectionRangeToSegs(e))},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderFill:function(t,n,r){var i,s,o,u,a,f,l,c,h,p;if(n.length){n=this.renderFillSegEls(t,n),i=this.groupSegCols(n),r=r||t.toLowerCase(),s=e('<div class="fc-'+r+'-skeleton">'+"<table><tr/></table>"+"</div>"),o=s.find("tr");for(u=0;u<i.length;u++){a=i[u],f=e("<td/>").appendTo(o);if(a.length){l=e('<div class="fc-'+r+'-container"/>').appendTo(f),c=this.colDates[u];for(h=0;h<a.length;h++)p=a[h],l.append(p.el.css({top:this.computeDateTop(p.start,c),bottom:-this.computeDateTop(p.end,c)}))}}this.bookendCells(o,t),this.el.append(s),this.elsByFill[t]=s}return n}});en.mixin({eventSkeletonEl:null,renderFgSegs:function(t){return t=this.renderFgSegEls(t),this.el.append(this.eventSkeletonEl=e('<div class="fc-content-skeleton"/>').append(this.renderSegTable(t))),t},unrenderFgSegs:function(e){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(t){var n=e("<table><tr/></table>"),r=n.find("tr"),i,s,o,u,a,f;i=this.groupSegCols(t),this.computeSegVerticals(t);for(u=0;u<i.length;u++){a=i[u],this.placeSlotSegs(a),f=e('<div class="fc-event-container"/>');for(s=0;s<a.length;s++)o=a[s],o.el.css(this.generateSegPositionCss(o)),o.bottom-o.top<30&&o.el.addClass("fc-short"),f.append(o.el);r.append(e("<td/>").append(f))}return this.bookendCells(r,"eventSkeleton"),n},placeSlotSegs:function(e){var t,n,r;this.sortSegs(e),t=tn(e),nn(t);if(n=t[0]){for(r=0;r<n.length;r++)rn(n[r]);for(r=0;r<n.length;r++)this.computeSlotSegCoords(n[r],0,0)}},computeSlotSegCoords:function(e,t,n){var r=e.forwardSegs,i;if(e.forwardCoord===undefined){r.length?(this.sortForwardSlotSegs(r),this.computeSlotSegCoords(r[0],t+1,n),e.forwardCoord=r[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1);for(i=0;i<r.length;i++)this.computeSlotSegCoords(r[i],0,e.forwardCoord)}},updateSegVerticals:function(){var e=(this.segs||[]).concat(this.businessHourSegs||[]),t;this.computeSegVerticals(e);for(t=0;t<e.length;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},fgSegHtml:function(e,t){var n=this.view,r=e.event,i=n.isEventDraggable(r),s=!t&&e.isStart&&n.isEventResizableFromStart(r),o=!t&&e.isEnd&&n.isEventResizableFromEnd(r),u=this.getSegClasses(e,i,s||o),a=st(this.getEventSkinCss(r)),f,l,c;u.unshift("fc-time-grid-event","fc-v-event");if(n.isMultiDayEvent(r)){if(e.isStart||e.isEnd)f=this.getEventTimeText(e),l=this.getEventTimeText(e,"LT"),c=this.getEventTimeText(e,null,!1)}else f=this.getEventTimeText(r),l=this.getEventTimeText(r,"LT"),c=this.getEventTimeText(r,null,!1);return'<a class="'+u.join(" ")+'"'+(r.url?' href="'+rt(r.url)+'"':"")+(a?' style="'+a+'"':"")+">"+'<div class="fc-content">'+(f?'<div class="fc-time" data-start="'+rt(c)+'"'+' data-full="'+rt(l)+'"'+">"+"<span>"+rt(f)+"</span>"+"</div>":"")+(r.title?'<div class="fc-title">'+rt(r.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(o?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(e){var t=this.view.opt("slotEventOverlap"),n=e.backwardCoord,r=e.forwardCoord,i=this.generateSegVerticalCss(e),s,o;return t&&(r=Math.min(1,n+(r-n)*2)),this.isRTL?(s=1-r,o=n):(s=n,o=1-r),i.zIndex=e.level+1,i.left=s*100+"%",i.right=o*100+"%",t&&e.forwardPressure&&(i[this.isRTL?"marginLeft":"marginRight"]=20),i},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},groupSegCols:function(e){var t=[],n;for(n=0;n<this.colCnt;n++)t.push([]);for(n=0;n<e.length;n++)t[e[n].col].push(e[n]);return t},sortForwardSlotSegs:function(e){e.sort(ft(this,"compareForwardSlotSegs"))},compareForwardSlotSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareSegs(e,t)}});var un=n.View=Pt.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(e,n,r,i){this.calendar=e,this.type=this.name=n,this.options=r,this.intervalDuration=i||t.duration(1,"day"),this.nextDayThreshold=t.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=O(this.opt("eventOrder")),this.documentMousedownProxy=ft(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},trigger:function(e,t){var n=this.calendar;return n.trigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(t){e.extend(this,t),this.updateTitle()},computeRange:function(e){var t=q(this.intervalDuration),n=e.clone().startOf(t),r=n.clone().add(this.intervalDuration),i,s;return/year|month|week|day/.test(t)?(n.stripTime(),r.stripTime()):(n.hasTime()||(n=this.calendar.rezoneDate(n)),r.hasTime()||(r=this.calendar.rezoneDate(r))),i=n.clone(),i=this.skipHiddenDays(i),s=r.clone(),s=this.skipHiddenDays(s,-1,!0),{intervalUnit:t,intervalStart:n,intervalEnd:r,start:i,end:s}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(e)&&(e=this.skipHiddenDays(e,t),e.startOf("day")),e},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return this.intervalUnit=="year"?"YYYY":this.intervalUnit=="month"?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(e,t,n){var r=e.end;return r.hasTime()||(r=r.clone().subtract(1)),kt(e.start,r,t,n,this.opt("isRTL"))},setElement:function(e){this.el=e,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(t){var n=this,r=null;return this.displaying&&(r=this.queryScroll()),this.clear().then(function(){return n.displaying=e.when(n.displayView(t)).then(function(){n.forceScroll(n.computeInitialScroll(r)),n.triggerRender()})})},clear:function(){var t=this,n=this.displaying;return n?n.then(function(){return t.displaying=null,t.clearEvents(),t.clearView()}):e.when()},displayView:function(e){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.setDate(e),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours()},clearView:function(){this.unselect(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},renderBusinessHours:function(){},unrenderBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){e(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){e(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight"},updateSize:function(e){var t;e&&(t=this.queryScroll()),this.updateHeight(e),this.updateWidth(e),e&&this.setScroll(t)},updateWidth:function(e){},updateHeight:function(e){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(e,t){},computeScrollerHeight:function(e){var t=this.scrollerEl,n,r;return n=this.el.add(t),n.css({position:"relative",left:-1}),r=this.el.outerHeight()-t.height(),n.css({position:"",left:""}),e-r},computeInitialScroll:function(e){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},setScroll:function(e){if(this.scrollerEl)return this.scrollerEl.scrollTop(e)},forceScroll:function(e){var t=this;this.setScroll(e),setTimeout(function(){t.setScroll(e)},0)},displayEvents:function(e){var t=this.queryScroll();this.clearEvents(),this.renderEvents(e),this.isEventsRendered=!0,this.setScroll(t),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1)},renderEvents:function(e){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(t,n){var r=this.trigger("eventRender",t,t,n);return r===!1?n=null:r&&r!==!0&&(n=e(r)),n},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var n=this.getEventSegs(),r;for(r=0;r<n.length;r++)(!t||n[r].event._id===t._id)&&n[r].el&&e.call(this,n[r])},getEventSegs:function(){return[]},isEventDraggable:function(e){var t=e.source||{};return nt(e.startEditable,t.startEditable,this.opt("eventStartEditable"),e.editable,t.editable,this.opt("editable"))},reportEventDrop:function(e,t,n,r,i){var s=this.calendar,o=s.mutateEvent(e,t,n),u=function(){o.undo(),s.reportEventChange()};this.triggerEventDrop(e,o.dateDelta,u,r,i),s.reportEventChange()},triggerEventDrop:function(e,t,n,r,i){this.trigger("eventDrop",r[0],e,t,n,i,{})},reportExternalDrop:function(t,n,r,i,s){var o=t.eventProps,u,a;o&&(u=e.extend({},o,n),a=this.calendar.renderEvent(u,t.stick)[0]),this.triggerExternalDrop(a,n,r,i,s)},triggerExternalDrop:function(e,t,n,r,i){this.trigger("drop",n[0],t.start,r,i),e&&this.trigger("eventReceive",null,e)},renderDrag:function(e,t){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return nt(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportEventResize:function(e,t,n,r,i){var s=this.calendar,o=s.mutateEvent(e,t,n),u=function(){o.undo(),s.reportEventChange()};this.triggerEventResize(e,o.durationDelta,u,r,i),s.reportEventChange()},triggerEventResize:function(e,t,n,r,i){this.trigger("eventResize",r[0],e,t,n,i,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=!0,this.triggerSelect(e,t)},triggerSelect:function(e,t){this.trigger("select",null,e.start,e.end,t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,e))},unrenderSelection:function(){},documentMousedown:function(t){var n;this.isSelected&&this.opt("unselectAuto")&&N(t)&&(n=this.opt("unselectCancel"),(!n||!e(t.target).closest(n).length)&&this.unselect(t))},triggerDayClick:function(e,t,n){this.trigger("dayClick",t,e.start,n)},initHiddenDays:function(){var t=this.opt("hiddenDays")||[],n=[],r=0,i;this.opt("weekends")===!1&&t.push(0,6);for(i=0;i<7;i++)(n[i]=e.inArray(i,t)!==-1)||r++;if(!r)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(e){return t.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var r=e.clone();t=t||1;while(this.isHiddenDayHash[(r.day()+(n?t:0)+7)%7])r.add(t,"days");return r},computeDayRange:function(e){var t=e.start.clone().stripTime(),n=e.end,r=null,i;n&&(r=n.clone().stripTime(),i=+n.time(),i&&i>=this.nextDayThreshold&&r.add(1,"days"));if(!n||r<=t)r=t.clone().add(1,"days");return{start:t,end:r}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}}),an=n.Calendar=Pt.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:fn,initialize:function(){},initOptions:function(e){var t,n,r,i;e=o(e),t=e.lang,n=ln[t],n||(t=an.defaults.lang,n=ln[t]||{}),r=nt(e.isRTL,n.isRTL,an.defaults.isRTL),i=r?an.rtlDefaults:{},this.dirDefaults=i,this.langDefaults=n,this.overrides=e,this.options=s([an.defaults,i,n,e]),dn(this.options),this.viewSpecCache={}},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(t){var r,i,s;if(e.inArray(t,B)!=-1){r=this.header.getViewsWithButtons(),e.each(n.views,function(e){r.push(e)});for(i=0;i<r.length;i++){s=this.getViewSpec(r[i]);if(s&&s.singleUnit==t)return s}}},buildViewSpec:function(e){var n=this.overrides.views||{},i=[],o=[],u=[],a=e,f,l,c,h;while(a)f=r[a],l=n[a],a=null,typeof f=="function"&&(f={"class":f}),f&&(i.unshift(f),o.unshift(f.defaults||{}),c=c||f.duration,a=a||f.type),l&&(u.unshift(l),c=c||l.duration,a=a||l.type);return f=K(i),f.type=e,f["class"]?(c&&(c=t.duration(c),c.valueOf()&&(f.duration=c,h=q(c),c.as(h)===1&&(f.singleUnit=h,u.unshift(n[h]||{})))),f.defaults=s(o),f.overrides=s(u),this.buildViewSpecOptions(f),this.buildViewSpecButtonText(f,e),f):!1},buildViewSpecOptions:function(e){e.options=s([an.defaults,e.defaults,this.dirDefaults,this.langDefaults,this.overrides,e.overrides]),dn(e.options)},buildViewSpecButtonText:function(e,t){function n(n){var r=n.buttonText||{};return r[t]||(e.singleUnit?r[e.singleUnit]:null)}e.buttonTextOverride=n(this.overrides)||e.overrides.buttonText,e.buttonTextDefault=n(this.langDefaults)||n(this.dirDefaults)||e.defaults.buttonText||n(an.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||t},instantiateView:function(e){var t=this.getViewSpec(e);return new t["class"](this,e,t.options,t.duration)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectRange:function(e,t){return e=this.moment(e),t?t=this.moment(t):e.hasTime()?t=e.clone().add(this.defaultTimedEventDuration):t=e.clone().add(this.defaultAllDayEventDuration),{start:e,end:t}}});an.mixin(Ht),an.defaults={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},an.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},an.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var ln=n.langs={};n.datepickerLang=function(t,n,r){var i=ln[t]||(ln[t]={});i.isRTL=r.isRTL,i.weekNumberTitle=r.weekHeader,e.each(cn,function(e,t){i[e]=t(r)}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(r))},n.lang=function(t,n){var r,i;r=ln[t]||(ln[t]={}),n&&(r=ln[t]=s([r,n])),i=vn(t),e.each(hn,function(e,t){r[e]==null&&(r[e]=t(i,r))}),an.defaults.lang=t};var cn={buttonText:function(e){return{prev:it(e.prevText),next:it(e.nextText),today:it(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},hn={dayOfMonthFormat:function(e,t){var n=e.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}},pn={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};n.lang("en",an.englishDefaults),n.sourceNormalizers=[],n.sourceFetchers=[];var gn={dataType:"json",cache:!1},yn=1;an.prototype.getPeerEvents=function(e,t){var n=this.getEventCache(),r=[],i,s;for(i=0;i<n.length;i++)s=n[i],(!e||e._id!==s._id)&&r.push(s);return r};var En=un.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new Gt(this),this.coordMap=this.dayGrid.coordMap},setRange:function(e){un.prototype.setRange.call(this,e),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(e)},computeRange:function(e){var t=un.prototype.computeRange.call(this,e);return/year|month/.test(t.intervalUnit)&&(t.start.startOf("week"),t.start=this.skipHiddenDays(t.start),t.end.weekday()&&(t.end.add(1,"week").startOf("week"),t.end=this.skipHiddenDays(t.end,-1,!0))),t},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+">"+"<span>"+rt(this.opt("weekNumberTitle"))+"</span>"+"</th>"},numberIntroHtml:function(e){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+">"+"<span>"+this.dayGrid.getCell(e,0).start.format("w")+"</span>"+"</td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(e){var t=e.start,n;return this.dayNumbersVisible?(n=this.dayGrid.getDayClasses(t),n.unshift("fc-day-number"),'<td class="'+n.join(" ")+'" data-date="'+t.format()+'">'+t.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return this.weekNumberWidth!==null?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&typeof e!="number"},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=p(this.el.find(".fc-week-number")))},setHeight:function(e,t){var n=this.opt("eventLimit"),r;v(this.scrollerEl),a(this.headRowEl),this.dayGrid.removeSegPopover(),n&&typeof n=="number"&&this.dayGrid.limitRows(n),r=this.computeScrollerHeight(e),this.setGridHeight(r,t),n&&typeof n!="number"&&this.dayGrid.limitRows(n),!t&&d(this.scrollerEl,r)&&(u(this.headRowEl,w(this.scrollerEl)),r=this.computeScrollerHeight(e),this.scrollerEl.height(r))},setGridHeight:function(e,t){t?h(this.dayGrid.rowEls):c(this.dayGrid.rowEls,e,!0)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Sn=En.extend({computeRange:function(e){var t=En.prototype.computeRange.call(this,e),n;return this.isFixedWeeks()&&(n=Math.ceil(t.end.diff(t.start,"weeks",!0)),t.end.add(6-n,"weeks")),t},setGridHeight:function(e,t){t=t||this.opt("weekMode")==="variable",t&&(e*=this.rowCnt/6),c(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");return e?e==="fixed":this.opt("fixedWeekCount")}});r.basic={"class":En},r.basicDay={type:"basic",duration:{days:1}},r.basicWeek={type:"basic",duration:{weeks:1}},r.month={"class":Sn,duration:{months:1},defaults:{fixedWeekCount:!0}};var xn=un.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new en(this),this.opt("allDaySlot")?(this.dayGrid=new Gt(this),this.coordMap=new Ft([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(e){un.prototype.setRange.call(this,e),this.timeGrid.setRange(e),this.dayGrid&&this.dayGrid.setRange(e)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=e('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){var e,t;return this.opt("weekNumbers")?(e=this.timeGrid.getCell(0).start,t=e.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+">"+"<span>"+rt(t)+"</span>"+"</th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+">"+"<span>"+(this.opt("allDayHtml")||rt(this.opt("allDayText")))+"</span>"+"</td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return this.axisWidth!==null?'style="width:'+this.axisWidth+'px"':""},updateSize:function(e){this.timeGrid.updateSize(e),un.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=p(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,r;this.bottomRuleHeight===null&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),v(this.scrollerEl),a(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),n=this.opt("eventLimit"),n&&typeof n!="number"&&(n=Tn),n&&this.dayGrid.limitRows(n)),t||(r=this.computeScrollerHeight(e),d(this.scrollerEl,r)?(u(this.noScrollRowEls,w(this.scrollerEl)),r=this.computeScrollerHeight(e),this.scrollerEl.height(r)):(this.scrollerEl.height(r).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var e=t.duration(this.opt("scrollTime")),n=this.timeGrid.computeTimeTop(e);return n=Math.ceil(n),n&&n++,n},renderEvents:function(e){var t=[],n=[],r=[],i,s;for(s=0;s<e.length;s++)e[s].allDay?t.push(e[s]):n.push(e[s]);i=this.timeGrid.renderEvents(n),this.dayGrid&&(r=this.dayGrid.renderEvents(t)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(e,t){if(e.start.hasTime())return this.timeGrid.renderDrag(e,t);if(this.dayGrid)return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Tn=5,Nn=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return r.agenda={"class":xn,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},r.agendaDay={type:"agenda",duration:{days:1}},r.agendaWeek={type:"agenda",duration:{weeks:1}},n});