$.request=function(e){var t=location.search.slice(1),n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return unescape(i[1])=="undefined"?"":unescape(i[1])}return""},$.submitForm=function(e){var t={url:"",param:[],loading:"正在提交数据...",success:null,close:!0},e=$.extend(t,e);$.ajax({url:e.url,data:e.param,type:"post",dataType:"json",success:function(t){t.state=="success"?(e.success(t),$.modalMsg(t.message,t.state),e.close==1&&$.modalClose()):$.modalAlert(t.message,t.state)},error:function(e,t,n){$.loading(!1),$.modalMsg(n,"error")},beforeSend:function(){$.loading(!0,e.loading)},complete:function(){$.loading(!1)}})},$.fn.formValid=function(){return $(this).valid({errorPlacement:function(e,t){t.parents(".formValue").addClass("has-error"),t.parents(".has-error").find("i.error").remove(),t.parents(".has-error").append('<i class="form-control-feedback fa fa-exclamation-circle error" data-placement="left" data-toggle="tooltip" title="'+e+'"></i>'),$("[data-toggle='tooltip']").tooltip(),t.parents(".input-group").hasClass("input-group")&&t.parents(".has-error").find("i.error").css("right","33px")},success:function(e){e.parents(".has-error").find("i.error").remove(),e.parent().removeClass("has-error")}})},$.fn.formSerialize=function(e){var t=$(this);if(!e){var o={};return t.find("input,select,textarea").each(function(e){var t=$(this),n=t.attr("id"),r=t.attr("type");switch(r){case"checkbox":o[n]=t.is(":checked");break;default:var i=t.val()==""?"&nbsp;":t.val();$.request("keyValue")||(i=i.replace(/&nbsp;/g,"")),o[n]=i}}),$("[name=__RequestVerificationToken]").length>0&&(o.__RequestVerificationToken=$("[name=__RequestVerificationToken]").val()),o}for(var n in e){var r=t.find("#"+n),i=$.trim(e[n]).replace(/&nbsp;/g,""),s=r.attr("type");r.hasClass("select2-hidden-accessible")&&(s="select");switch(s){case"checkbox":i=="true"?r.attr("checked","checked"):r.removeAttr("checked");break;case"select":r.val(i).trigger("change");break;default:r.val(i)}}return!1},$.fn.bindSelect=function(e){var t={id:"id",text:"text",search:!1,url:"",param:[],change:null},e=$.extend(t,e),n=$(this);e.url!=""?$.ajax({url:e.url,data:e.param,dataType:"json",async:!1,success:function(t){$.each(t,function(r){n.append($("<option></option>").val(t[r][e.id]).html(t[r][e.text]))}),n.select2({minimumResultsForSearch:e.search==1?0:-1}),n.on("change",function(r){e.change!=null&&e.change(t[$(this).find("option:selected").index()]),$("#select2-"+n.attr("id")+"-container").html($(this).find("option:selected").text().replace(/　　/g,""))})}}):n.select2({minimumResultsForSearch:-1})};